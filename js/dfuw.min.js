(function(a){function e(a){var b=RegExp(g.join("|"),"gi");return a.replace(b,"****")}a(".accordion").length&&a(".accordion").accordion({collapsible:!0});a("#expand-all").length&&a("#expand-all").click(function(){"Expand All"==a("#expand-all span").text()?(a(".accordion .pane").show(),a("#expand-all span").text("Collapse All"),a("#expand-all i").removeClass("icon-plus-sign").addClass("icon-minus-sign")):(a(".accordion-header").removeClass("current"),a("#expand-all span").text("Expand All"),a("#expand-all i").removeClass("icon-minus-sign").addClass("icon-plus-sign"),
a(".accordion").accordion("destroy").accordion({collapsible:!0}))});a("#expand-all").length&&a(".accordion-header").click(function(){a(this);a("#expand-all i").hasClass("icon-minus-sign")&&(a("#expand-all span").text("Expand All"),a("#expand-all i").removeClass("icon-minus-sign").addClass("icon-plus-sign"),a(".accordion").accordion("destroy").accordion({collapsible:!0}))});var h={init:function(){a("#school_selector").change(function(){window.location=a(this).val()});a("#content.air").length&&a(".excl-legend span").text("Earth");
a("#content.earth").length&&a(".excl-legend span").text("Air");a("#content.pain").length&&a(".excl-legend span").text("Life");a("#content.life").length&&a(".excl-legend span").text("Pain");a("#content.law").length&&a(".excl-legend span").text("Chaos");a("#content.chaos").length&&a(".excl-legend span").text("Law");a("#content.brawler").length&&a(".excl-legend span").text("Blackguard");a("#content.blackguard").length&&a(".excl-legend span").text("Brawler");a("#content.deadeye").length&&a(".excl-legend span").text("Duelist");
a("#content.duelist").length&&a(".excl-legend span").text("Deadeye");a("#content.baresark").length&&a(".excl-legend span").text("Champion");a("#content.champion").length&&a(".excl-legend span").text("Baresark");a("#content.battle-brand").length&&a(".excl-legend span").text("Slayer");a("#content.slayer").length&&a(".excl-legend span").text("Battle Brand");a("#content.fire").length&&a(".excl-legend span").text("Water");a("#content.water").length&&a(".excl-legend span").text("Fire")}},i={init:function(){a("#clans-list").tablesorter({widgets:["zebra"]});
a("#server_select").change(function(){window.location="../"+a(this).val()})}},d={init:function(){a("#df-vid").attr("src","http://www.youtube.com/embed/"+a("#featured-list li:first-child a").data("vidId")+"?rel=0&autoplay=0&iv_load_policy=3&modestbranding=1&wmode=opaque");a("#featured-list li a").on({click:function(){var c=a(this).data("vidId");a("#df-vid").attr("src","http://www.youtube.com/embed/"+c+"?rel=0&autoplay=1&iv_load_policy=3&modestbranding=1&wmode=opaque")}});d.getForumFallFeed();a(".blogfeed a.post").ellipsis()},
getForumFallFeed:function(){a(".load-wrapper").stop(!0,!0).fadeIn("fast");a.ajax({url:templateDir+"/proxy.php?url=http://forums.darkfallonline.com/external.php?type=RSS2",dataType:"xml",async:!1,type:"GET",timeout:6E4,success:function(c){var b="<ul>";a(c).find("item").each(function(c){if(4<c)return!1;b+='<li><a href="'+a(this).find("link").text()+'" target="_blank" rel="nofollow"><span class="title">'+e(a(this).find("title").text())+'</span></a> <div class="descr">'+e(a(this).find("description").text())+
"</div></li>"});b+="</ul>";a(".bottom .forumfeed ul").length&&a(".bottom .forumfeed ul").remove();"<ul></ul>"==b?(b="<ul><li><strong>Forums currently offline!</strong></li></ul>",a(".bottom .forumfeed").append(b)):(a(".bottom .forumfeed").append(b),a(".forumfeed li a, .forumfeed li .descr").ellipsis());a(".load-wrapper").stop(!0,!0).fadeOut();setTimeout(function(){d.getForumFallFeed()},18E4)},error:function(){a(".loading, .loader").stop(!0,!0).fadeOut();setTimeout(function(){d.getForumFallFeed()},
18E4)}})}},f={getStatus:function(){a.ajax({url:templateDir+"/serverstatus.php",dataType:"json",timeout:6E4,success:function(c){if("SUCCESS"==c["@attributes"].Result){a("#server-status").find("span i").removeClass("up down");for(var c=c.Servers.ServerStatus,b=0;b<c.length;b++){var d=c[b]["@attributes"].ID.toLowerCase();a("#server-status").find("."+d).find("i").addClass(c[b]["@attributes"].Status.toLowerCase())}}},error:function(){a("#server-status").find("span i").removeClass("up down")}});setTimeout(function(){f.getStatus()},
12E4)}},j={init:function(){a(".your-subject").change(function(){"Add My Clan"==a(".your-subject option:selected").val()?(a(".feedback .clan-details").slideDown(),a(".feedback .event-details").slideUp()):"Add My Event"==a(".your-subject option:selected").val()?(a(".feedback .clan-details").slideUp(),a(".feedback .event-details").slideDown()):(a(".feedback .clan-details").slideUp(),a(".feedback .event-details").slideUp())})}},k={init:function(){a("#fs-btn").click(function(){fullscreen?(a("#map-container").appendTo(".entry-content"),
a("#fs-btn").removeClass("active"),fullscreen=!1):(a("#map-container").appendTo("body"),a("#fs-btn").addClass("active"),a("body").scrollTop(0),fullscreen=!0);map_initialize();checkToggles();marker&&marker.setMap(map)});a("#mob-btn").click(function(){showMobs?(a("#mob-btn").removeClass("active"),showMobs=!1,hideMarkers("mobs")):(a("#mob-btn").addClass("active"),showMobs=!0,showMarkers("mobs"))});a("#bank-btn").click(function(){showBanks?(a("#bank-btn").removeClass("active"),showBanks=!1,hideMarkers("banks")):
(a("#bank-btn").addClass("active"),showBanks=!0,showMarkers("banks"))});a("#chest-btn").click(function(){showBanks?(a("#chest-btn").removeClass("active"),showBanks=!1,hideMarkers("chests")):(a("#chest-btn").addClass("active"),showBanks=!0,showMarkers("chests"))});a("#craft-btn").click(function(){showCrafts?(a("#craft-btn").removeClass("active"),showCrafts=!1,hideMarkers("crafts")):(a("#craft-btn").addClass("active"),showCrafts=!0,showMarkers("crafts"))});a("#bind-btn").click(function(){showBinds?
(a("#bind-btn").removeClass("active"),showBinds=!1,hideMarkers("binds")):(a("#bind-btn").addClass("active"),showBinds=!0,showMarkers("binds"))});a("#portal-btn").click(function(){showPortals?(a("#portal-btn").removeClass("active"),showPortals=!1,hideMarkers("portals")):(a("#portal-btn").addClass("active"),showPortals=!0,showMarkers("portals"))});a("#holding-btn").click(function(){showHoldings?(a("#holding-btn").removeClass("active"),showHoldings=!1,hideMarkers("holdings")):(a("#holding-btn").addClass("active"),
showHoldings=!0,showMarkers("holdings"))});a("#village-btn").click(function(){showVillages?(a("#village-btn").removeClass("active"),showVillages=!1,hideMarkers("villages")):(a("#village-btn").addClass("active"),showVillages=!0,showMarkers("villages"))});a("#searchmap").click(function(){searchPOIs(a("#mapsearch-text").val())});a("#mapsearch-text").keypress(function(c){13==c.which&&searchPOIs(a("#mapsearch-text").val())})}},l={init:function(){a(".video h2, .video p").ellipsis()}},g="fuck;shit;fag; ass;puss;nigg;bitch;asshole;dick;penis;vagina;cunt".split(";");
a(".post-type-archive-role, .post-type-archive-school, .post-type-archive-spell, .single-school").length&&h.init();a(".page-template-archive-video-php").length&&l.init();a("h2").length&&a("h2").ellipsis();a(".home").length&&d.init();a(".clans").length&&i.init();a(".feedback").length&&j.init();a("#branding").length&&f.getStatus();a("#map_canvas").length&&(map_initialize(),k.init());a(".misc-game-info").length&&a("table").tablesorter({widgets:["zebra"]});a(".gad").each(function(){0==a(this).height()&&
(a(this).addClass("blocked"),"long"==a(this).data("adType")?a(this).html('<a href="http://www.gamefanshop.com/partner-IamRedSeal/" target="_blank"><img src="http://www.gamefanshop.com/StoreFiles/Styles/vip/banner1.jpg" alt="gamefanshop partner banner" /></a>'):"square"==a(this).data("adType")&&a(this).html('<a href="http://www.gamefanshop.com/partner-IamRedSeal/" target="_blank"><img src="http://www.gamefanshop.com/StoreFiles/Styles/vip/banner2t.jpg" width="180" alt="gamefanshop partner banner" /></a>'))})})(jQuery);
